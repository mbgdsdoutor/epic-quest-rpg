<div class="ficha">
  <button class="ficha-closer" (click)="emitHideFicha()">
    <i class="material-icons">keyboard_arrow_left</i>
  </button>
  <div class="ficha-title">
    {{ isMaster ? "Gerenciar Fichas" : "Visualizar Ficha" }}
  </div>
  <div *ngIf="isMaster" class="ficha-tabs">
    <div
      *ngFor="let ficha of fichas"
      [ngClass]="{ active: ficha.id === activeFicha.id }"
      (click)="changeActive(ficha.id)"
    >
      {{ ficha.name }}
    </div>
  </div>
  <div class="ficha-body">
    <div class="ficha-body-fixed-header">
      <img
        [src]="'../assets/images/' + activeFicha.class.id + '.jpeg'"
        alt="class-icon"
      />
      <div>
        <p>Raça: {{ activeFicha.race.name }}</p>
        <p>Classe: {{ activeFicha.class.name }}</p>
      </div>
    </div>
    <div class="ficha-body-fixed-content">
      <img [src]="activeFicha.photoUrl" alt="user picture" />
      <div class="bottom-info">
        <div class="bottom-info-name">
          {{ activeFicha.name }} - Lv. {{ activeFicha.nivel }}
        </div>
      </div>
    </div>
    <div class="ficha-body-header">
      <div class="ficha-body-header-item">
        <img src="assets/icons/progression.svg" alt="xp-icon" />
        <p>
          xp: {{ activeFicha.experience }} /
          {{ experiencesPerLevel["level" + activeFicha.nivel] }}
        </p>
      </div>
      <div class="ficha-body-header-item">
        <img src="assets/icons/life-ball.svg" alt="xp-icon" />
        <p>
          vida: {{ activeFicha.lifePoints }} / {{ activeFicha.totalLifePoints }}
        </p>
      </div>
      <div class="ficha-body-header-item">
        <img src="assets/icons/mana-ball.svg" alt="xp-icon" />
        <p>
          mana: {{ activeFicha.manaPoints }} / {{ activeFicha.totalManaPoints }}
        </p>
      </div>
      <div class="ficha-body-header-item">
        <img src="assets/icons/swap-bag.svg" alt="xp-icon" />
        <p>tibar: {{ activeFicha.tibar }}</p>
      </div>
      <div class="ficha-body-header-item">
        <img src="assets/icons/wingfoot.svg" alt="xp-icon" />
        <p>deslocamento: {{ activeFicha.displacement }}</p>
      </div>
    </div>
    <div
      class="ficha-body-container"
      [ngStyle]="{ height: isMaster ? '65%' : '72%' }"
    >
      <div class="ficha-body-tabs">
        <div
          class="ficha-body-tabs-option"
          [ngClass]="{ active: activeTab === 1 }"
          (click)="changeActiveTab(1)"
        >
          <img src="assets/icons/status.svg" alt="xp-icon" />
          Status
        </div>
        <div
          class="ficha-body-tabs-option"
          [ngClass]="{ active: activeTab === 2 }"
          (click)="changeActiveTab(2)"
        >
          <img src="assets/icons/pericias.svg" alt="xp-icon" />
          Perícias
        </div>
        <div
          class="ficha-body-tabs-option"
          [ngClass]="{ active: activeTab === 3 }"
          (click)="changeActiveTab(3)"
        >
          <img src="assets/icons/itens.svg" alt="xp-icon" />
          Itens
        </div>
        <div
          class="ficha-body-tabs-option"
          [ngClass]="{ active: activeTab === 4 }"
          (click)="changeActiveTab(4)"
        >
          <img src="assets/icons/habilidades.svg" alt="xp-icon" />
          Habilidades
        </div>
      </div>
      <div class="ficha-body-tabs-content">
        <status [ficha]="activeFicha" *ngIf="activeTab === 1"></status>
        <pericias [ficha]="activeFicha" *ngIf="activeTab === 2"></pericias>
        <itens
          [ficha]="activeFicha"
          [isMaster]="isMaster"
          *ngIf="activeTab === 3"
        ></itens>
        <habilidades
          [ficha]="activeFicha"
          [isMaster]="isMaster"
          *ngIf="activeTab === 4"
        ></habilidades>
      </div>
    </div>
  </div>
</div>
